<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AscEmu: G3D::BufferPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="AscEmu.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">AscEmu
   </div>
   <div id="projectbrief">OpenSource WoW Emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classG3D_1_1BufferPool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classG3D_1_1BufferPool-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">G3D::BufferPool Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for G3D::BufferPool:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool__coll__graph.svg" width="364" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa5c512c61d2051163cc46816909a15cf" id="r_aa5c512c61d2051163cc46816909a15cf"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a> = 128
, <a class="el" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">smallBufferSize</a> = 1024
, <a class="el" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">medBufferSize</a> = 4096
 }</td></tr>
<tr class="separator:aa5c512c61d2051163cc46816909a15cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed4601b02312f6b97e82bcb28087174" id="r_a8ed4601b02312f6b97e82bcb28087174"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a> = 250000
, <a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">maxSmallBuffers</a> = 40000
, <a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">maxMedBuffers</a> = 5000
 }</td></tr>
<tr class="separator:a8ed4601b02312f6b97e82bcb28087174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1e3c94755d72017ec67ca85b2d175272" id="r_a1e3c94755d72017ec67ca85b2d175272"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a1e3c94755d72017ec67ca85b2d175272">BufferPool</a> ()</td></tr>
<tr class="separator:a1e3c94755d72017ec67ca85b2d175272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9e1fca356826e3350d913c9b61e1f5" id="r_a0c9e1fca356826e3350d913c9b61e1f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a0c9e1fca356826e3350d913c9b61e1f5">~BufferPool</a> ()</td></tr>
<tr class="separator:a0c9e1fca356826e3350d913c9b61e1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c719044b50c6e90af558a29a86466f" id="r_ad3c719044b50c6e90af558a29a86466f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#ad3c719044b50c6e90af558a29a86466f">realloc</a> (<a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="el" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>, size_t <a class="el" href="classbytes.html">bytes</a>)</td></tr>
<tr class="separator:ad3c719044b50c6e90af558a29a86466f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef1fab2c206878b64e0791fac3b5b35" id="r_a8ef1fab2c206878b64e0791fac3b5b35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a8ef1fab2c206878b64e0791fac3b5b35">malloc</a> (size_t <a class="el" href="classbytes.html">bytes</a>)</td></tr>
<tr class="separator:a8ef1fab2c206878b64e0791fac3b5b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fd89485417b6905ba4d95bc0b72a150" id="r_a4fd89485417b6905ba4d95bc0b72a150"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">free</a> (<a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="el" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)</td></tr>
<tr class="separator:a4fd89485417b6905ba4d95bc0b72a150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfae09665026182c5b9c7e8a51ffe29d" id="r_acfae09665026182c5b9c7e8a51ffe29d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#acfae09665026182c5b9c7e8a51ffe29d">performance</a> () <a class="el" href="StormLib_2src_2zlib_2zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:acfae09665026182c5b9c7e8a51ffe29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97356e70eebe2c6c7e24deedd0204fdc" id="r_a97356e70eebe2c6c7e24deedd0204fdc"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a97356e70eebe2c6c7e24deedd0204fdc">status</a> () <a class="el" href="StormLib_2src_2zlib_2zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a></td></tr>
<tr class="separator:a97356e70eebe2c6c7e24deedd0204fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a986af21e14409457cdc854ec2f316d5a" id="r_a986af21e14409457cdc854ec2f316d5a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">totalMallocs</a></td></tr>
<tr class="separator:a986af21e14409457cdc854ec2f316d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a6760afc97311c48b2e9a258f197981" id="r_a3a6760afc97311c48b2e9a258f197981"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">mallocsFromTinyPool</a></td></tr>
<tr class="separator:a3a6760afc97311c48b2e9a258f197981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b3cb9118b402a8715f82f1bfa49d2e" id="r_a13b3cb9118b402a8715f82f1bfa49d2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">mallocsFromSmallPool</a></td></tr>
<tr class="separator:a13b3cb9118b402a8715f82f1bfa49d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a1ece3af70eed61552533ca8a64b6e" id="r_a88a1ece3af70eed61552533ca8a64b6e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">mallocsFromMedPool</a></td></tr>
<tr class="separator:a88a1ece3af70eed61552533ca8a64b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac046209fa410e9e447d36444ca07db79" id="r_ac046209fa410e9e447d36444ca07db79"><td class="memItemLeft" align="right" valign="top">volatile size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">bytesAllocated</a></td></tr>
<tr class="separator:ac046209fa410e9e447d36444ca07db79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ac2276496075f2f5ce98b1de575b55c2c" id="r_ac2276496075f2f5ce98b1de575b55c2c"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a></td></tr>
<tr class="separator:ac2276496075f2f5ce98b1de575b55c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2e0c0d16977037a4f382f28c8ce391" id="r_a5a2e0c0d16977037a4f382f28c8ce391"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a5a2e0c0d16977037a4f382f28c8ce391">RealPtr</a></td></tr>
<tr class="separator:a5a2e0c0d16977037a4f382f28c8ce391"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8a18faf6f397141c7124e8b4d74a8ed7" id="r_a8a18faf6f397141c7124e8b4d74a8ed7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a8a18faf6f397141c7124e8b4d74a8ed7">lock</a> ()</td></tr>
<tr class="separator:a8a18faf6f397141c7124e8b4d74a8ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a335e0bc88d38b9dcaca718fd1447f6" id="r_a4a335e0bc88d38b9dcaca718fd1447f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a> ()</td></tr>
<tr class="separator:a4a335e0bc88d38b9dcaca718fd1447f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ee76bae578f498a4f575624a313bee" id="r_aa9ee76bae578f498a4f575624a313bee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#aa9ee76bae578f498a4f575624a313bee">tinyMalloc</a> (size_t <a class="el" href="classbytes.html">bytes</a>)</td></tr>
<tr class="separator:aa9ee76bae578f498a4f575624a313bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e08ec5f4e3e73b35edc1520967bbc6" id="r_ab1e08ec5f4e3e73b35edc1520967bbc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="StormPort_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#ab1e08ec5f4e3e73b35edc1520967bbc6">inTinyHeap</a> (<a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="el" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)</td></tr>
<tr class="separator:ab1e08ec5f4e3e73b35edc1520967bbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62994a36cc3cef3de34e4f7181468170" id="r_a62994a36cc3cef3de34e4f7181468170"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a62994a36cc3cef3de34e4f7181468170">tinyFree</a> (<a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="el" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)</td></tr>
<tr class="separator:a62994a36cc3cef3de34e4f7181468170"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac0428545f4f75d288a5be9ebd1bdf90" id="r_aac0428545f4f75d288a5be9ebd1bdf90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">flushPool</a> (<a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> *pool, int &amp;poolSize)</td></tr>
<tr class="separator:aac0428545f4f75d288a5be9ebd1bdf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f831ba5ebf9e8dd35be547f57795a93" id="r_a4f831ba5ebf9e8dd35be547f57795a93"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a> (<a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> *pool, int &amp;poolSize, size_t <a class="el" href="classbytes.html">bytes</a>)</td></tr>
<tr class="separator:a4f831ba5ebf9e8dd35be547f57795a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a418998c669ca071ecaf8ace2caa23acc" id="r_a418998c669ca071ecaf8ace2caa23acc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">smallPool</a> [<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">maxSmallBuffers</a>]</td></tr>
<tr class="separator:a418998c669ca071ecaf8ace2caa23acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c24c9ce440cce19a83a738f5fdd98d" id="r_a19c24c9ce440cce19a83a738f5fdd98d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a></td></tr>
<tr class="separator:a19c24c9ce440cce19a83a738f5fdd98d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73db98d9f9fbba696e550d6cc3e58094" id="r_a73db98d9f9fbba696e550d6cc3e58094"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">medPool</a> [<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">maxMedBuffers</a>]</td></tr>
<tr class="separator:a73db98d9f9fbba696e550d6cc3e58094"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af195680c9c3b45a44f0230ab423e076c" id="r_af195680c9c3b45a44f0230ab423e076c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a></td></tr>
<tr class="separator:af195680c9c3b45a44f0230ab423e076c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd173590815a149d38617043ac7ef36d" id="r_afd173590815a149d38617043ac7ef36d"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a> [<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>]</td></tr>
<tr class="separator:afd173590815a149d38617043ac7ef36d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ef6e5ce32c2937dbc63867c257f351" id="r_a42ef6e5ce32c2937dbc63867c257f351"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a></td></tr>
<tr class="separator:a42ef6e5ce32c2937dbc63867c257f351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec38ea52cf6d4ced646d72f516ccbe4" id="r_a4ec38ea52cf6d4ced646d72f516ccbe4"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a></td></tr>
<tr class="separator:a4ec38ea52cf6d4ced646d72f516ccbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce128971566ce3bfc185c20e8adc312" id="r_a7ce128971566ce3bfc185c20e8adc312"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classG3D_1_1Spinlock.html">Spinlock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classG3D_1_1BufferPool.html#a7ce128971566ce3bfc185c20e8adc312">m_lock</a></td></tr>
<tr class="separator:a7ce128971566ce3bfc185c20e8adc312"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l00970">970</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a5a2e0c0d16977037a4f382f28c8ce391" name="a5a2e0c0d16977037a4f382f28c8ce391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a2e0c0d16977037a4f382f28c8ce391">&#9670;&#160;</a></span>RealPtr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="classG3D_1_1BufferPool.html#a5a2e0c0d16977037a4f382f28c8ce391">G3D::BufferPool::RealPtr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Actual block allocated on the heap </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01002">1002</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="ac2276496075f2f5ce98b1de575b55c2c" name="ac2276496075f2f5ce98b1de575b55c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2276496075f2f5ce98b1de575b55c2c">&#9670;&#160;</a></span>UserPtr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">G3D::BufferPool::UserPtr</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classG3D_1_1Pointer.html">Pointer</a> given to the program. Unless in the tiny heap, the user size of the block is stored right in front of the pointer as a uint32. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l00999">999</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa5c512c61d2051163cc46816909a15cf" name="aa5c512c61d2051163cc46816909a15cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c512c61d2051163cc46816909a15cf">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Only store buffers up to these sizes (in bytes) in each pool-&gt; Different pools have different management strategies.</p>
<p>A large block is preallocated for tiny buffers; they are used with tremendous frequency. Other buffers are allocated as demanded. Tiny buffers are 128 bytes long because that seems to align well with cache sizes on many machines. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e" name="aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e"></a>tinyBufferSize&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0" name="aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0"></a>smallBufferSize&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834" name="aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834"></a>medBufferSize&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l00985">985</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  985</span>{<a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a> = 128, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">smallBufferSize</a> = 1024, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">medBufferSize</a> = 4096};</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e"><div class="ttname"><a href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">G3D::BufferPool::tinyBufferSize</a></div><div class="ttdeci">@ tinyBufferSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00985">System.cpp:985</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0"><div class="ttname"><a href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">G3D::BufferPool::smallBufferSize</a></div><div class="ttdeci">@ smallBufferSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00985">System.cpp:985</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834"><div class="ttname"><a href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">G3D::BufferPool::medBufferSize</a></div><div class="ttdeci">@ medBufferSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00985">System.cpp:985</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ed4601b02312f6b97e82bcb28087174" name="a8ed4601b02312f6b97e82bcb28087174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed4601b02312f6b97e82bcb28087174">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Most buffers we're allowed to store. 250000 * { 128 | 256} = {32 | 64} MB (preallocated) 40000 * {1024 | 2048} = {40 | 80} MB (allocated on demand) 5000 * {4096 | 8192} = {20 | 40} MB (allocated on demand) </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e" name="a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e"></a>maxTinyBuffers&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9" name="a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9"></a>maxSmallBuffers&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c" name="a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c"></a>maxMedBuffers&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l00994">994</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  994</span>{<a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a> = 250000, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">maxSmallBuffers</a> = 40000, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">maxMedBuffers</a> = 5000};</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">G3D::BufferPool::maxTinyBuffers</a></div><div class="ttdeci">@ maxTinyBuffers</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00994">System.cpp:994</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">G3D::BufferPool::maxSmallBuffers</a></div><div class="ttdeci">@ maxSmallBuffers</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00994">System.cpp:994</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">G3D::BufferPool::maxMedBuffers</a></div><div class="ttdeci">@ maxMedBuffers</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00994">System.cpp:994</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1e3c94755d72017ec67ca85b2d175272" name="a1e3c94755d72017ec67ca85b2d175272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e3c94755d72017ec67ca85b2d175272">&#9670;&#160;</a></span>BufferPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G3D::BufferPool::BufferPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>-------------------------------&mdash; old mutex</p>
<p>-------------------------------&mdash; old mutex</p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01154">1154</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1154</span>                 {</div>
<div class="line"><span class="lineno"> 1155</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">totalMallocs</a>         = 0;</div>
<div class="line"><span class="lineno"> 1156</span> </div>
<div class="line"><span class="lineno"> 1157</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">mallocsFromTinyPool</a>  = 0;</div>
<div class="line"><span class="lineno"> 1158</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">mallocsFromSmallPool</a> = 0;</div>
<div class="line"><span class="lineno"> 1159</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">mallocsFromMedPool</a>   = 0;</div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">bytesAllocated</a>       = 0;</div>
<div class="line"><span class="lineno"> 1162</span> </div>
<div class="line"><span class="lineno"> 1163</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>         = 0;</div>
<div class="line"><span class="lineno"> 1164</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a>             = NULL;</div>
<div class="line"><span class="lineno"> 1165</span> </div>
<div class="line"><span class="lineno"> 1166</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>        = 0;</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>          = 0;</div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span> </div>
<div class="line"><span class="lineno"> 1171</span>        <span class="comment">// Initialize the tiny heap as a bunch of pointers into one</span></div>
<div class="line"><span class="lineno"> 1172</span>        <span class="comment">// pre-allocated buffer.</span></div>
<div class="line"><span class="lineno"> 1173</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">::malloc</a>(<a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a> * <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>);</div>
<div class="line"><span class="lineno"> 1174</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>; ++i) {</div>
<div class="line"><span class="lineno"> 1175</span>            <a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[i] = (<a class="code hl_typedef" href="namespaceG3D.html#aef6949de035da2287649c9db11ec3ba4">uint8</a>*)<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a> + (<a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a> * i);</div>
<div class="line"><span class="lineno"> 1176</span>        }</div>
<div class="line"><span class="lineno"> 1177</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> = <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>;</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span><span class="preprocessor">#if 0        </span><span class="comment">///---------------------------------- old mutex</span></div>
<div class="line"><span class="lineno"> 1180</span><span class="preprocessor">#       ifdef G3D_WINDOWS</span></div>
<div class="line"><span class="lineno"> 1181</span>            InitializeCriticalSection(&amp;mutex);</div>
<div class="line"><span class="lineno"> 1182</span><span class="preprocessor">#       else</span></div>
<div class="line"><span class="lineno"> 1183</span>            pthread_mutex_init(&amp;mutex, NULL);</div>
<div class="line"><span class="lineno"> 1184</span><span class="preprocessor">#       endif</span></div>
<div class="line"><span class="lineno"> 1185</span><span class="preprocessor">#endif        </span><span class="comment">///---------------------------------- old mutex</span></div>
<div class="line"><span class="lineno"> 1186</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a13b3cb9118b402a8715f82f1bfa49d2e"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">G3D::BufferPool::mallocsFromSmallPool</a></div><div class="ttdeci">int mallocsFromSmallPool</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01143">System.cpp:1143</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a19c24c9ce440cce19a83a738f5fdd98d"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">G3D::BufferPool::smallPoolSize</a></div><div class="ttdeci">int smallPoolSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01014">System.cpp:1014</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a3a6760afc97311c48b2e9a258f197981"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">G3D::BufferPool::mallocsFromTinyPool</a></div><div class="ttdeci">int mallocsFromTinyPool</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01142">System.cpp:1142</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a42ef6e5ce32c2937dbc63867c257f351"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">G3D::BufferPool::tinyPoolSize</a></div><div class="ttdeci">int tinyPoolSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01024">System.cpp:1024</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a4ec38ea52cf6d4ced646d72f516ccbe4"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">G3D::BufferPool::tinyHeap</a></div><div class="ttdeci">void * tinyHeap</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01027">System.cpp:1027</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a4f831ba5ebf9e8dd35be547f57795a93"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">G3D::BufferPool::malloc</a></div><div class="ttdeci">UserPtr malloc(MemBlock *pool, int &amp;poolSize, size_t bytes)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01113">System.cpp:1113</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a88a1ece3af70eed61552533ca8a64b6e"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">G3D::BufferPool::mallocsFromMedPool</a></div><div class="ttdeci">int mallocsFromMedPool</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01144">System.cpp:1144</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a986af21e14409457cdc854ec2f316d5a"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">G3D::BufferPool::totalMallocs</a></div><div class="ttdeci">int totalMallocs</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01141">System.cpp:1141</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_ac046209fa410e9e447d36444ca07db79"><div class="ttname"><a href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">G3D::BufferPool::bytesAllocated</a></div><div class="ttdeci">volatile size_t bytesAllocated</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01152">System.cpp:1152</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_af195680c9c3b45a44f0230ab423e076c"><div class="ttname"><a href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">G3D::BufferPool::medPoolSize</a></div><div class="ttdeci">int medPoolSize</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01017">System.cpp:1017</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_afd173590815a149d38617043ac7ef36d"><div class="ttname"><a href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">G3D::BufferPool::tinyPool</a></div><div class="ttdeci">void * tinyPool[maxTinyBuffers]</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01023">System.cpp:1023</a></div></div>
<div class="ttc" id="anamespaceG3D_html_aef6949de035da2287649c9db11ec3ba4"><div class="ttname"><a href="namespaceG3D.html#aef6949de035da2287649c9db11ec3ba4">G3D::uint8</a></div><div class="ttdeci">uint8_t uint8</div><div class="ttdef"><b>Definition</b> <a href="g3dmath_8h_source.html#l00164">g3dmath.h:164</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a1e3c94755d72017ec67ca85b2d175272_cgraph.svg" width="524" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0c9e1fca356826e3350d913c9b61e1f5" name="a0c9e1fca356826e3350d913c9b61e1f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9e1fca356826e3350d913c9b61e1f5">&#9670;&#160;</a></span>~BufferPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">G3D::BufferPool::~BufferPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01189">1189</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1189</span>                  {</div>
<div class="line"><span class="lineno"> 1190</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">::free</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a>);</div>
<div class="line"><span class="lineno"> 1191</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">flushPool</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">smallPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>);</div>
<div class="line"><span class="lineno"> 1192</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">flushPool</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">medPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>);</div>
<div class="line"><span class="lineno"> 1193</span><span class="preprocessor">#if 0 </span><span class="comment">//-------------------------------- old mutex</span></div>
<div class="line"><span class="lineno"> 1194</span><span class="preprocessor">#       ifdef G3D_WINDOWS</span></div>
<div class="line"><span class="lineno"> 1195</span>            DeleteCriticalSection(&amp;mutex);</div>
<div class="line"><span class="lineno"> 1196</span><span class="preprocessor">#       else</span></div>
<div class="line"><span class="lineno"> 1197</span>            <span class="comment">// No destruction on pthreads</span></div>
<div class="line"><span class="lineno"> 1198</span><span class="preprocessor">#       endif</span></div>
<div class="line"><span class="lineno"> 1199</span><span class="preprocessor">#endif </span><span class="comment">//--------------------------------old mutex</span></div>
<div class="line"><span class="lineno"> 1200</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a418998c669ca071ecaf8ace2caa23acc"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">G3D::BufferPool::smallPool</a></div><div class="ttdeci">MemBlock smallPool[maxSmallBuffers]</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01013">System.cpp:1013</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a4fd89485417b6905ba4d95bc0b72a150"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">G3D::BufferPool::free</a></div><div class="ttdeci">void free(UserPtr ptr)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01333">System.cpp:1333</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a73db98d9f9fbba696e550d6cc3e58094"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">G3D::BufferPool::medPool</a></div><div class="ttdeci">MemBlock medPool[maxMedBuffers]</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01016">System.cpp:1016</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_aac0428545f4f75d288a5be9ebd1bdf90"><div class="ttname"><a href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">G3D::BufferPool::flushPool</a></div><div class="ttdeci">void flushPool(MemBlock *pool, int &amp;poolSize)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01100">System.cpp:1100</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a0c9e1fca356826e3350d913c9b61e1f5_cgraph.svg" width="100%" height="509"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aac0428545f4f75d288a5be9ebd1bdf90" name="aac0428545f4f75d288a5be9ebd1bdf90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac0428545f4f75d288a5be9ebd1bdf90">&#9670;&#160;</a></span>flushPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void G3D::BufferPool::flushPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>poolSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01100">1100</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1100</span>                                                  {</div>
<div class="line"><span class="lineno"> 1101</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; poolSize; ++i) {</div>
<div class="line"><span class="lineno"> 1102</span>            <a class="code hl_variable" href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">bytesAllocated</a> -= <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(pool[i].<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1103</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">::free</a>(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#af8d5dcbf8f87b240aa5b5c8aa6e3f8c3">USERPTR_TO_REALPTR</a>(pool[i].<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>));</div>
<div class="line"><span class="lineno"> 1104</span>            pool[i].ptr = NULL;</div>
<div class="line"><span class="lineno"> 1105</span>            pool[i].bytes = 0;</div>
<div class="line"><span class="lineno"> 1106</span>        }</div>
<div class="line"><span class="lineno"> 1107</span>        poolSize = 0;</div>
<div class="line"><span class="lineno"> 1108</span>    }</div>
<div class="ttc" id="aclassbytes_html"><div class="ttname"><a href="classbytes.html">bytes</a></div><div class="ttdef"><b>Definition</b> <a href="fmt_2include_2fmt_2format_8h_source.html#l04101">format.h:4101</a></div></div>
<div class="ttc" id="adep_2g3dlite_2System_8cpp_html_a861516b22788e02878cfabe36d9f153d"><div class="ttname"><a href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a></div><div class="ttdeci">#define USERSIZE_TO_REALSIZE(x)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00966">System.cpp:966</a></div></div>
<div class="ttc" id="adep_2g3dlite_2System_8cpp_html_af8d5dcbf8f87b240aa5b5c8aa6e3f8c3"><div class="ttname"><a href="dep_2g3dlite_2System_8cpp.html#af8d5dcbf8f87b240aa5b5c8aa6e3f8c3">USERPTR_TO_REALPTR</a></div><div class="ttdeci">#define USERPTR_TO_REALPTR(x)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00965">System.cpp:965</a></div></div>
<div class="ttc" id="afmt_2include_2fmt_2format_8h_html_adb6e274f8eb0b74b2865215e1b49c535"><div class="ttname"><a href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a></div><div class="ttdeci">auto ptr(T p) -&gt; const void *</div><div class="ttdef"><b>Definition</b> <a href="fmt_2include_2fmt_2format_8h_source.html#l04067">format.h:4067</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_aac0428545f4f75d288a5be9ebd1bdf90_cgraph.svg" width="100%" height="510"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_aac0428545f4f75d288a5be9ebd1bdf90_icgraph.svg" width="462" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4fd89485417b6905ba4d95bc0b72a150" name="a4fd89485417b6905ba4d95bc0b72a150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fd89485417b6905ba4d95bc0b72a150">&#9670;&#160;</a></span>free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void G3D::BufferPool::free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01333">1333</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1333</span>                           {</div>
<div class="line"><span class="lineno"> 1334</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> == NULL) {</div>
<div class="line"><span class="lineno"> 1335</span>            <span class="comment">// Free does nothing on null pointers</span></div>
<div class="line"><span class="lineno"> 1336</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1337</span>        }</div>
<div class="line"><span class="lineno"> 1338</span> </div>
<div class="line"><span class="lineno"> 1339</span>        assert(<a class="code hl_function" href="namespaceG3D.html#a9c969a87247b46c2fb87960306015e66">isValidPointer</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>));</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classG3D_1_1BufferPool.html#ab1e08ec5f4e3e73b35edc1520967bbc6">inTinyHeap</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)) {</div>
<div class="line"><span class="lineno"> 1342</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#a8a18faf6f397141c7124e8b4d74a8ed7">lock</a>();</div>
<div class="line"><span class="lineno"> 1343</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#a62994a36cc3cef3de34e4f7181468170">tinyFree</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1344</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1345</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1346</span>        }</div>
<div class="line"><span class="lineno"> 1347</span> </div>
<div class="line"><span class="lineno"> 1348</span>        <span class="keywordtype">size_t</span> <a class="code hl_class" href="classbytes.html">bytes</a> = <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a4bcefcfc93d1bfb33e286bdd8d748ff3">USERSIZE_FROM_USERPTR</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a8a18faf6f397141c7124e8b4d74a8ed7">lock</a>();</div>
<div class="line"><span class="lineno"> 1351</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">smallBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1352</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a> &lt; <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">maxSmallBuffers</a>) {</div>
<div class="line"><span class="lineno"> 1353</span>                <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">smallPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>] = MemBlock(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>, <a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1354</span>                ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>;</div>
<div class="line"><span class="lineno"> 1355</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1356</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1357</span>            }</div>
<div class="line"><span class="lineno"> 1358</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">medBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1359</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a> &lt; <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">maxMedBuffers</a>) {</div>
<div class="line"><span class="lineno"> 1360</span>                <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">medPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>] = MemBlock(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>, <a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1361</span>                ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>;</div>
<div class="line"><span class="lineno"> 1362</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1363</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1364</span>            }</div>
<div class="line"><span class="lineno"> 1365</span>        }</div>
<div class="line"><span class="lineno"> 1366</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">bytesAllocated</a> -= <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1367</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1368</span> </div>
<div class="line"><span class="lineno"> 1369</span>        <span class="comment">// Free; the buffer pools are full or this is too big to store.</span></div>
<div class="line"><span class="lineno"> 1370</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">::free</a>(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#af8d5dcbf8f87b240aa5b5c8aa6e3f8c3">USERPTR_TO_REALPTR</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>));</div>
<div class="line"><span class="lineno"> 1371</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a4a335e0bc88d38b9dcaca718fd1447f6"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">G3D::BufferPool::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01035">System.cpp:1035</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a62994a36cc3cef3de34e4f7181468170"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a62994a36cc3cef3de34e4f7181468170">G3D::BufferPool::tinyFree</a></div><div class="ttdeci">void tinyFree(UserPtr ptr)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01078">System.cpp:1078</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a8a18faf6f397141c7124e8b4d74a8ed7"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a8a18faf6f397141c7124e8b4d74a8ed7">G3D::BufferPool::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01031">System.cpp:1031</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_ab1e08ec5f4e3e73b35edc1520967bbc6"><div class="ttname"><a href="classG3D_1_1BufferPool.html#ab1e08ec5f4e3e73b35edc1520967bbc6">G3D::BufferPool::inTinyHeap</a></div><div class="ttdeci">bool inTinyHeap(UserPtr ptr)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01072">System.cpp:1072</a></div></div>
<div class="ttc" id="adep_2g3dlite_2System_8cpp_html_a4bcefcfc93d1bfb33e286bdd8d748ff3"><div class="ttname"><a href="dep_2g3dlite_2System_8cpp.html#a4bcefcfc93d1bfb33e286bdd8d748ff3">USERSIZE_FROM_USERPTR</a></div><div class="ttdeci">#define USERSIZE_FROM_USERPTR(u)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00968">System.cpp:968</a></div></div>
<div class="ttc" id="anamespaceG3D_html_a9c969a87247b46c2fb87960306015e66"><div class="ttname"><a href="namespaceG3D.html#a9c969a87247b46c2fb87960306015e66">G3D::isValidPointer</a></div><div class="ttdeci">bool isValidPointer(const void *x)</div><div class="ttdef"><b>Definition</b> <a href="debug_8h_source.html#l00054">debug.h:54</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4fd89485417b6905ba4d95bc0b72a150_cgraph.svg" width="100%" height="514"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4fd89485417b6905ba4d95bc0b72a150_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab1e08ec5f4e3e73b35edc1520967bbc6" name="ab1e08ec5f4e3e73b35edc1520967bbc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e08ec5f4e3e73b35edc1520967bbc6">&#9670;&#160;</a></span>inTinyHeap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="StormPort_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> G3D::BufferPool::inTinyHeap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if this is a pointer into the tiny heap. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01072">1072</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1072</span>                                 {</div>
<div class="line"><span class="lineno"> 1073</span>        <span class="keywordflow">return</span> </div>
<div class="line"><span class="lineno"> 1074</span>            (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> &gt;= <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a>) &amp;&amp; </div>
<div class="line"><span class="lineno"> 1075</span>            (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> &lt; (<a class="code hl_typedef" href="namespaceG3D.html#aef6949de035da2287649c9db11ec3ba4">uint8</a>*)<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a4ec38ea52cf6d4ced646d72f516ccbe4">tinyHeap</a> + <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a> * <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>);</div>
<div class="line"><span class="lineno"> 1076</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_ab1e08ec5f4e3e73b35edc1520967bbc6_cgraph.svg" width="306" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_ab1e08ec5f4e3e73b35edc1520967bbc6_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8a18faf6f397141c7124e8b4d74a8ed7" name="a8a18faf6f397141c7124e8b4d74a8ed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a18faf6f397141c7124e8b4d74a8ed7">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void G3D::BufferPool::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01031">1031</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1031</span>                {</div>
<div class="line"><span class="lineno"> 1032</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a7ce128971566ce3bfc185c20e8adc312">m_lock</a>.<a class="code hl_function" href="classG3D_1_1Spinlock.html#a311d78aeca006760b7f5460dabb3091f">lock</a>();</div>
<div class="line"><span class="lineno"> 1033</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a7ce128971566ce3bfc185c20e8adc312"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a7ce128971566ce3bfc185c20e8adc312">G3D::BufferPool::m_lock</a></div><div class="ttdeci">Spinlock m_lock</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01029">System.cpp:1029</a></div></div>
<div class="ttc" id="aclassG3D_1_1Spinlock_html_a311d78aeca006760b7f5460dabb3091f"><div class="ttname"><a href="classG3D_1_1Spinlock.html#a311d78aeca006760b7f5460dabb3091f">G3D::Spinlock::lock</a></div><div class="ttdeci">bool lock()</div><div class="ttdef"><b>Definition</b> <a href="GMutex_8h_source.html#l00052">GMutex.h:52</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a8a18faf6f397141c7124e8b4d74a8ed7_cgraph.svg" width="618" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a8a18faf6f397141c7124e8b4d74a8ed7_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a4f831ba5ebf9e8dd35be547f57795a93" name="a4f831ba5ebf9e8dd35be547f57795a93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f831ba5ebf9e8dd35be547f57795a93">&#9670;&#160;</a></span>malloc() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> G3D::BufferPool::malloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>poolSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocate out of a specific pool. Return NULL if no suitable memory was found. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01113">1113</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1113</span>                                                                {</div>
<div class="line"><span class="lineno"> 1114</span> </div>
<div class="line"><span class="lineno"> 1115</span>        <span class="comment">// OPT: find the smallest block that satisfies the request.</span></div>
<div class="line"><span class="lineno"> 1116</span> </div>
<div class="line"><span class="lineno"> 1117</span>        <span class="comment">// See if there&#39;s something we can use in the buffer pool.</span></div>
<div class="line"><span class="lineno"> 1118</span>        <span class="comment">// Search backwards since usually we&#39;ll re-use the last one.</span></div>
<div class="line"><span class="lineno"> 1119</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = (<span class="keywordtype">int</span>)poolSize - 1; i &gt;= 0; --i) {</div>
<div class="line"><span class="lineno"> 1120</span>            <span class="keywordflow">if</span> (pool[i].<a class="code hl_class" href="classbytes.html">bytes</a> &gt;= <a class="code hl_class" href="classbytes.html">bytes</a>) {</div>
<div class="line"><span class="lineno"> 1121</span>                <span class="comment">// We found a suitable entry in the pool.</span></div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>                <span class="comment">// No need to offset the pointer; it is already offset</span></div>
<div class="line"><span class="lineno"> 1124</span>                <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = pool[i].ptr;</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>                <span class="comment">// Remove this element from the pool, replacing it with</span></div>
<div class="line"><span class="lineno"> 1127</span>                <span class="comment">// the one from the end (same as Array::fastRemove)</span></div>
<div class="line"><span class="lineno"> 1128</span>                --poolSize;</div>
<div class="line"><span class="lineno"> 1129</span>                pool[i] = pool[poolSize];</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1132</span>            }</div>
<div class="line"><span class="lineno"> 1133</span>        }</div>
<div class="line"><span class="lineno"> 1134</span> </div>
<div class="line"><span class="lineno"> 1135</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1136</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_ac2276496075f2f5ce98b1de575b55c2c"><div class="ttname"><a href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">G3D::BufferPool::UserPtr</a></div><div class="ttdeci">void * UserPtr</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00999">System.cpp:999</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4f831ba5ebf9e8dd35be547f57795a93_cgraph.svg" width="276" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4f831ba5ebf9e8dd35be547f57795a93_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8ef1fab2c206878b64e0791fac3b5b35" name="a8ef1fab2c206878b64e0791fac3b5b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef1fab2c206878b64e0791fac3b5b35">&#9670;&#160;</a></span>malloc() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> G3D::BufferPool::malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01240">1240</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1240</span>                                 {</div>
<div class="line"><span class="lineno"> 1241</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a8a18faf6f397141c7124e8b4d74a8ed7">lock</a>();</div>
<div class="line"><span class="lineno"> 1242</span>        ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">totalMallocs</a>;</div>
<div class="line"><span class="lineno"> 1243</span> </div>
<div class="line"><span class="lineno"> 1244</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>            <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#aa9ee76bae578f498a4f575624a313bee">tinyMalloc</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>) {</div>
<div class="line"><span class="lineno"> 1249</span>                ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">mallocsFromTinyPool</a>;</div>
<div class="line"><span class="lineno"> 1250</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1251</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1252</span>            }</div>
<div class="line"><span class="lineno"> 1253</span> </div>
<div class="line"><span class="lineno"> 1254</span>        } </div>
<div class="line"><span class="lineno"> 1255</span>        </div>
<div class="line"><span class="lineno"> 1256</span>        <span class="comment">// Failure to allocate a tiny buffer is allowed to flow</span></div>
<div class="line"><span class="lineno"> 1257</span>        <span class="comment">// through to a small buffer</span></div>
<div class="line"><span class="lineno"> 1258</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">smallBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1259</span>            </div>
<div class="line"><span class="lineno"> 1260</span>            <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">smallPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>, <a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1261</span> </div>
<div class="line"><span class="lineno"> 1262</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>) {</div>
<div class="line"><span class="lineno"> 1263</span>                ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">mallocsFromSmallPool</a>;</div>
<div class="line"><span class="lineno"> 1264</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1265</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1266</span>            }</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">medBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1269</span>            <span class="comment">// Note that a small allocation failure does *not* fall</span></div>
<div class="line"><span class="lineno"> 1270</span>            <span class="comment">// through into a medium allocation because that would</span></div>
<div class="line"><span class="lineno"> 1271</span>            <span class="comment">// waste the medium buffer&#39;s resources.</span></div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>            <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">medPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>, <a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>) {</div>
<div class="line"><span class="lineno"> 1276</span>                ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">mallocsFromMedPool</a>;</div>
<div class="line"><span class="lineno"> 1277</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1278</span>                <a class="code hl_define" href="debugAssert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> != NULL, <span class="stringliteral">&quot;BufferPool::malloc returned NULL&quot;</span>);</div>
<div class="line"><span class="lineno"> 1279</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1280</span>            }</div>
<div class="line"><span class="lineno"> 1281</span>        }</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#ac046209fa410e9e447d36444ca07db79">bytesAllocated</a> += <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1284</span>        <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4a335e0bc88d38b9dcaca718fd1447f6">unlock</a>();</div>
<div class="line"><span class="lineno"> 1285</span> </div>
<div class="line"><span class="lineno"> 1286</span>        <span class="comment">// Heap allocate</span></div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>        <span class="comment">// Allocate 4 extra bytes for our size header (unfortunate,</span></div>
<div class="line"><span class="lineno"> 1289</span>        <span class="comment">// since malloc already added its own header).</span></div>
<div class="line"><span class="lineno"> 1290</span>        <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#a5a2e0c0d16977037a4f382f28c8ce391">RealPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">::malloc</a>(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>));</div>
<div class="line"><span class="lineno"> 1291</span> </div>
<div class="line"><span class="lineno"> 1292</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> == NULL) {</div>
<div class="line"><span class="lineno"> 1293</span><span class="preprocessor">#           ifdef G3D_WINDOWS</span></div>
<div class="line"><span class="lineno"> 1294</span>                <span class="comment">// Check for memory corruption</span></div>
<div class="line"><span class="lineno"> 1295</span>                <a class="code hl_define" href="debugAssert_8h.html#aec9f6cdb1305e9da834facaf2816069d">alwaysAssertM</a>(_CrtCheckMemory() == <a class="code hl_define" href="mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <span class="stringliteral">&quot;Heap corruption detected.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1296</span><span class="preprocessor">#           endif</span></div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>            <span class="comment">// Flush memory pools to try and recover space</span></div>
<div class="line"><span class="lineno"> 1299</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">flushPool</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a418998c669ca071ecaf8ace2caa23acc">smallPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a19c24c9ce440cce19a83a738f5fdd98d">smallPoolSize</a>);</div>
<div class="line"><span class="lineno"> 1300</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#aac0428545f4f75d288a5be9ebd1bdf90">flushPool</a>(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a73db98d9f9fbba696e550d6cc3e58094">medPool</a>, <a class="code hl_variable" href="classG3D_1_1BufferPool.html#af195680c9c3b45a44f0230ab423e076c">medPoolSize</a>);</div>
<div class="line"><span class="lineno"> 1301</span>            <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">::malloc</a>(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>));</div>
<div class="line"><span class="lineno"> 1302</span>        }</div>
<div class="line"><span class="lineno"> 1303</span> </div>
<div class="line"><span class="lineno"> 1304</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> == NULL) {</div>
<div class="line"><span class="lineno"> 1305</span>            <span class="keywordflow">if</span> ((<a class="code hl_function" href="classG3D_1_1System.html#af5ff7d4d7cbe8e0773d38d6d7bd0102c">System::outOfMemoryCallback</a>() != NULL) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1306</span>                (<a class="code hl_function" href="classG3D_1_1System.html#af5ff7d4d7cbe8e0773d38d6d7bd0102c">System::outOfMemoryCallback</a>()(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>), <span class="keyword">true</span>) == <span class="keyword">true</span>)) {</div>
<div class="line"><span class="lineno"> 1307</span>                <span class="comment">// Re-attempt the malloc</span></div>
<div class="line"><span class="lineno"> 1308</span>                <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">::malloc</a>(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>));</div>
<div class="line"><span class="lineno"> 1309</span>            }</div>
<div class="line"><span class="lineno"> 1310</span>        }</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> == NULL) {</div>
<div class="line"><span class="lineno"> 1313</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classG3D_1_1System.html#af5ff7d4d7cbe8e0773d38d6d7bd0102c">System::outOfMemoryCallback</a>() != NULL) {</div>
<div class="line"><span class="lineno"> 1314</span>                <span class="comment">// Notify the application</span></div>
<div class="line"><span class="lineno"> 1315</span>                <a class="code hl_function" href="classG3D_1_1System.html#af5ff7d4d7cbe8e0773d38d6d7bd0102c">System::outOfMemoryCallback</a>()(<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1316</span>            }</div>
<div class="line"><span class="lineno"> 1317</span><span class="preprocessor">#           ifdef G3D_DEBUG</span></div>
<div class="line"><span class="lineno"> 1318</span>            <a class="code hl_function" href="namespaceG3D.html#adaf5d0b1bed48e7af66559c7c0ecaedf">debugPrintf</a>(<span class="stringliteral">&quot;::malloc(%d) returned NULL\n&quot;</span>, (<span class="keywordtype">int</span>)<a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a861516b22788e02878cfabe36d9f153d">USERSIZE_TO_REALSIZE</a>(<a class="code hl_class" href="classbytes.html">bytes</a>));</div>
<div class="line"><span class="lineno"> 1319</span><span class="preprocessor">#           endif</span></div>
<div class="line"><span class="lineno"> 1320</span>            <a class="code hl_define" href="debugAssert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> != NULL, </div>
<div class="line"><span class="lineno"> 1321</span>                         <span class="stringliteral">&quot;::malloc returned NULL. Either the &quot;</span></div>
<div class="line"><span class="lineno"> 1322</span>                         <span class="stringliteral">&quot;operating system is out of memory or the &quot;</span></div>
<div class="line"><span class="lineno"> 1323</span>                         <span class="stringliteral">&quot;heap is corrupt.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1324</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1325</span>        }</div>
<div class="line"><span class="lineno"> 1326</span> </div>
<div class="line"><span class="lineno"> 1327</span>        ((<span class="keywordtype">size_t</span>*)<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)[0] = <a class="code hl_class" href="classbytes.html">bytes</a>;</div>
<div class="line"><span class="lineno"> 1328</span> </div>
<div class="line"><span class="lineno"> 1329</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#ac34f6a1126579ba53e59e047547d5758">REALPTR_TO_USERPTR</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1330</span>    }</div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_a5a2e0c0d16977037a4f382f28c8ce391"><div class="ttname"><a href="classG3D_1_1BufferPool.html#a5a2e0c0d16977037a4f382f28c8ce391">G3D::BufferPool::RealPtr</a></div><div class="ttdeci">void * RealPtr</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01002">System.cpp:1002</a></div></div>
<div class="ttc" id="aclassG3D_1_1BufferPool_html_aa9ee76bae578f498a4f575624a313bee"><div class="ttname"><a href="classG3D_1_1BufferPool.html#aa9ee76bae578f498a4f575624a313bee">G3D::BufferPool::tinyMalloc</a></div><div class="ttdeci">UserPtr tinyMalloc(size_t bytes)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l01042">System.cpp:1042</a></div></div>
<div class="ttc" id="aclassG3D_1_1System_html_af5ff7d4d7cbe8e0773d38d6d7bd0102c"><div class="ttname"><a href="classG3D_1_1System.html#af5ff7d4d7cbe8e0773d38d6d7bd0102c">G3D::System::outOfMemoryCallback</a></div><div class="ttdeci">static OutOfMemoryCallback outOfMemoryCallback()</div><div class="ttdef"><b>Definition</b> <a href="System_8h_source.html#l00406">System.h:406</a></div></div>
<div class="ttc" id="adebugAssert_8h_html_aec9f6cdb1305e9da834facaf2816069d"><div class="ttname"><a href="debugAssert_8h.html#aec9f6cdb1305e9da834facaf2816069d">alwaysAssertM</a></div><div class="ttdeci">#define alwaysAssertM(exp, message)</div><div class="ttdef"><b>Definition</b> <a href="debugAssert_8h_source.html#l00165">debugAssert.h:165</a></div></div>
<div class="ttc" id="adebugAssert_8h_html_af7e8ca29ffa4af20db0de5a93e1b81e9"><div class="ttname"><a href="debugAssert_8h.html#af7e8ca29ffa4af20db0de5a93e1b81e9">debugAssertM</a></div><div class="ttdeci">#define debugAssertM(exp, message)</div><div class="ttdef"><b>Definition</b> <a href="debugAssert_8h_source.html#l00161">debugAssert.h:161</a></div></div>
<div class="ttc" id="adep_2g3dlite_2System_8cpp_html_ac34f6a1126579ba53e59e047547d5758"><div class="ttname"><a href="dep_2g3dlite_2System_8cpp.html#ac34f6a1126579ba53e59e047547d5758">REALPTR_TO_USERPTR</a></div><div class="ttdeci">#define REALPTR_TO_USERPTR(x)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00964">System.cpp:964</a></div></div>
<div class="ttc" id="ampq-internal_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="mpq-internal_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition</b> <a href="mpq-internal_8h_source.html#l00062">mpq-internal.h:62</a></div></div>
<div class="ttc" id="anamespaceG3D_html_adaf5d0b1bed48e7af66559c7c0ecaedf"><div class="ttname"><a href="namespaceG3D.html#adaf5d0b1bed48e7af66559c7c0ecaedf">G3D::debugPrintf</a></div><div class="ttdeci">std::string __cdecl debugPrintf(const char *fmt ...)</div><div class="ttdef"><b>Definition</b> <a href="debugAssert_8cpp_source.html#l00356">debugAssert.cpp:356</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a8ef1fab2c206878b64e0791fac3b5b35_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="acfae09665026182c5b9c7e8a51ffe29d" name="acfae09665026182c5b9c7e8a51ffe29d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfae09665026182c5b9c7e8a51ffe29d">&#9670;&#160;</a></span>performance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string G3D::BufferPool::performance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01373">1373</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1373</span>                                  {</div>
<div class="line"><span class="lineno"> 1374</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">totalMallocs</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 1375</span>            <span class="keywordtype">int</span> pooled = <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">mallocsFromTinyPool</a> +</div>
<div class="line"><span class="lineno"> 1376</span>                         <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">mallocsFromSmallPool</a> + </div>
<div class="line"><span class="lineno"> 1377</span>                         <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">mallocsFromMedPool</a>;</div>
<div class="line"><span class="lineno"> 1378</span> </div>
<div class="line"><span class="lineno"> 1379</span>            <span class="keywordtype">int</span> total = <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a986af21e14409457cdc854ec2f316d5a">totalMallocs</a>;</div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceG3D.html#aa119854597a65e4db502ae63cd5ad954">format</a>(<span class="stringliteral">&quot;malloc performance: %5.1f%% &lt;= %db, %5.1f%% &lt;= %db, &quot;</span></div>
<div class="line"><span class="lineno"> 1382</span>                          <span class="stringliteral">&quot;%5.1f%% &lt;= %db, %5.1f%% &gt; %db&quot;</span>,</div>
<div class="line"><span class="lineno"> 1383</span>                          100.0 * <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a3a6760afc97311c48b2e9a258f197981">mallocsFromTinyPool</a>  / total,</div>
<div class="line"><span class="lineno"> 1384</span>                          <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">BufferPool::tinyBufferSize</a>,</div>
<div class="line"><span class="lineno"> 1385</span>                          100.0 * <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a13b3cb9118b402a8715f82f1bfa49d2e">mallocsFromSmallPool</a> / total,</div>
<div class="line"><span class="lineno"> 1386</span>                          <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa23c5fd41662f9046acb7a520b56385b0">BufferPool::smallBufferSize</a>,</div>
<div class="line"><span class="lineno"> 1387</span>                          100.0 * <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a88a1ece3af70eed61552533ca8a64b6e">mallocsFromMedPool</a>   / total,</div>
<div class="line"><span class="lineno"> 1388</span>                          <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">BufferPool::medBufferSize</a>,</div>
<div class="line"><span class="lineno"> 1389</span>                          100.0 * (1.0 - (<span class="keywordtype">double</span>)pooled / total),</div>
<div class="line"><span class="lineno"> 1390</span>                          <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfab2eaf815715d9ecf1f4165eb1b984834">BufferPool::medBufferSize</a>);</div>
<div class="line"><span class="lineno"> 1391</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1392</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;No System::malloc calls made yet.&quot;</span>;</div>
<div class="line"><span class="lineno"> 1393</span>        }</div>
<div class="line"><span class="lineno"> 1394</span>    }</div>
<div class="ttc" id="anamespaceG3D_html_aa119854597a65e4db502ae63cd5ad954"><div class="ttname"><a href="namespaceG3D.html#aa119854597a65e4db502ae63cd5ad954">G3D::format</a></div><div class="ttdeci">std::string __cdecl format(const char *fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="format_8cpp_source.html#l00025">format.cpp:25</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_acfae09665026182c5b9c7e8a51ffe29d_cgraph.svg" width="100%" height="556"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_acfae09665026182c5b9c7e8a51ffe29d_icgraph.svg" width="518" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad3c719044b50c6e90af558a29a86466f" name="ad3c719044b50c6e90af558a29a86466f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c719044b50c6e90af558a29a86466f">&#9670;&#160;</a></span>realloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> G3D::BufferPool::realloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01203">1203</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1203</span>                                               {</div>
<div class="line"><span class="lineno"> 1204</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> == NULL) {</div>
<div class="line"><span class="lineno"> 1205</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1206</span>        }</div>
<div class="line"><span class="lineno"> 1207</span> </div>
<div class="line"><span class="lineno"> 1208</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classG3D_1_1BufferPool.html#ab1e08ec5f4e3e73b35edc1520967bbc6">inTinyHeap</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>)) {</div>
<div class="line"><span class="lineno"> 1209</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>) {</div>
<div class="line"><span class="lineno"> 1210</span>                <span class="comment">// The old pointer actually had enough space.</span></div>
<div class="line"><span class="lineno"> 1211</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1212</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1213</span>                <span class="comment">// Free the old pointer and malloc</span></div>
<div class="line"><span class="lineno"> 1214</span>                </div>
<div class="line"><span class="lineno"> 1215</span>                <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> newPtr = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1216</span>                <a class="code hl_function" href="classG3D_1_1System.html#a3a5273d5c5223db9afb211e87b5f81a1">System::memcpy</a>(newPtr, <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>);</div>
<div class="line"><span class="lineno"> 1217</span>                <a class="code hl_function" href="classG3D_1_1BufferPool.html#a62994a36cc3cef3de34e4f7181468170">tinyFree</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1218</span>                <span class="keywordflow">return</span> newPtr;</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>            }</div>
<div class="line"><span class="lineno"> 1221</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1222</span>            <span class="comment">// In one of our heaps.</span></div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>            <span class="comment">// See how big the block really was</span></div>
<div class="line"><span class="lineno"> 1225</span>            <span class="keywordtype">size_t</span> userSize = <a class="code hl_define" href="dep_2g3dlite_2System_8cpp.html#a4bcefcfc93d1bfb33e286bdd8d748ff3">USERSIZE_FROM_USERPTR</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1226</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classbytes.html">bytes</a> &lt;= userSize) {</div>
<div class="line"><span class="lineno"> 1227</span>                <span class="comment">// The old block was big enough.</span></div>
<div class="line"><span class="lineno"> 1228</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1229</span>            }</div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>            <span class="comment">// Need to reallocate and move</span></div>
<div class="line"><span class="lineno"> 1232</span>            <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> newPtr = <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4f831ba5ebf9e8dd35be547f57795a93">malloc</a>(<a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1233</span>            <a class="code hl_function" href="classG3D_1_1System.html#a3a5273d5c5223db9afb211e87b5f81a1">System::memcpy</a>(newPtr, <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>, userSize);</div>
<div class="line"><span class="lineno"> 1234</span>            <a class="code hl_function" href="classG3D_1_1BufferPool.html#a4fd89485417b6905ba4d95bc0b72a150">free</a>(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1235</span>            <span class="keywordflow">return</span> newPtr;</div>
<div class="line"><span class="lineno"> 1236</span>        }</div>
<div class="line"><span class="lineno"> 1237</span>    }</div>
<div class="ttc" id="aclassG3D_1_1System_html_a3a5273d5c5223db9afb211e87b5f81a1"><div class="ttname"><a href="classG3D_1_1System.html#a3a5273d5c5223db9afb211e87b5f81a1">G3D::System::memcpy</a></div><div class="ttdeci">static void memcpy(void *dst, const void *src, size_t numBytes)</div><div class="ttdef"><b>Definition</b> <a href="dep_2g3dlite_2System_8cpp_source.html#l00649">System.cpp:649</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_ad3c719044b50c6e90af558a29a86466f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_ad3c719044b50c6e90af558a29a86466f_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a97356e70eebe2c6c7e24deedd0204fdc" name="a97356e70eebe2c6c7e24deedd0204fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97356e70eebe2c6c7e24deedd0204fdc">&#9670;&#160;</a></span>status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string G3D::BufferPool::status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01396">1396</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1396</span>                             {</div>
<div class="line"><span class="lineno"> 1397</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceG3D.html#aa119854597a65e4db502ae63cd5ad954">format</a>(<span class="stringliteral">&quot;preallocated shared buffers: %5d/%d x %db&quot;</span>,</div>
<div class="line"><span class="lineno"> 1398</span>            <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a> - <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>, <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a>);</div>
<div class="line"><span class="lineno"> 1399</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a97356e70eebe2c6c7e24deedd0204fdc_cgraph.svg" width="100%" height="556"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a97356e70eebe2c6c7e24deedd0204fdc_icgraph.svg" width="432" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a62994a36cc3cef3de34e4f7181468170" name="a62994a36cc3cef3de34e4f7181468170"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62994a36cc3cef3de34e4f7181468170">&#9670;&#160;</a></span>tinyFree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void G3D::BufferPool::tinyFree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01078">1078</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1078</span>                               {</div>
<div class="line"><span class="lineno"> 1079</span>        assert(<a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>);</div>
<div class="line"><span class="lineno"> 1080</span>        assert(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> &lt; <a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>);</div>
<div class="line"><span class="lineno"> 1081</span> <span class="comment">//           &quot;Tried to free a tiny pool buffer when the tiny pool freelist is full.&quot;);</span></div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span><span class="preprocessor">#       ifdef G3D_DEBUG</span></div>
<div class="line"><span class="lineno"> 1084</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 1085</span>                <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> prevOnHeap = <a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> - 1];</div>
<div class="line"><span class="lineno"> 1086</span>                assert(prevOnHeap != <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>); </div>
<div class="line"><span class="lineno"> 1087</span><span class="comment">//                    &quot;System::malloc heap corruption detected: &quot;</span></div>
<div class="line"><span class="lineno"> 1088</span><span class="comment">//                    &quot;the last two pointers on the freelist are identical (during tinyFree).&quot;);</span></div>
<div class="line"><span class="lineno"> 1089</span>            }</div>
<div class="line"><span class="lineno"> 1090</span><span class="preprocessor">#       endif</span></div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>        assert(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>] == NULL);</div>
<div class="line"><span class="lineno"> 1093</span> </div>
<div class="line"><span class="lineno"> 1094</span>        <span class="comment">// Put the pointer back into the free list</span></div>
<div class="line"><span class="lineno"> 1095</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>] = <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1096</span>        ++<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>;</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a62994a36cc3cef3de34e4f7181468170_cgraph.svg" width="286" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a62994a36cc3cef3de34e4f7181468170_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa9ee76bae578f498a4f575624a313bee" name="aa9ee76bae578f498a4f575624a313bee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9ee76bae578f498a4f575624a313bee">&#9670;&#160;</a></span>tinyMalloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> G3D::BufferPool::tinyMalloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Malloc out of the tiny heap. Returns NULL if allocation failed. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01042">1042</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1042</span>                                            {</div>
<div class="line"><span class="lineno"> 1043</span>        <span class="comment">// Note that we ignore the actual byte size</span></div>
<div class="line"><span class="lineno"> 1044</span>        <span class="comment">// and create a constant size block.</span></div>
<div class="line"><span class="lineno"> 1045</span>        (void)<a class="code hl_class" href="classbytes.html">bytes</a>;</div>
<div class="line"><span class="lineno"> 1046</span>        assert(<a class="code hl_enumvalue" href="classG3D_1_1BufferPool.html#aa5c512c61d2051163cc46816909a15cfa1911dc71d97be7d0d271265c28ea4d7e">tinyBufferSize</a> &gt;= <a class="code hl_class" href="classbytes.html">bytes</a>);</div>
<div class="line"><span class="lineno"> 1047</span> </div>
<div class="line"><span class="lineno"> 1048</span>        <a class="code hl_typedef" href="classG3D_1_1BufferPool.html#ac2276496075f2f5ce98b1de575b55c2c">UserPtr</a> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = NULL;</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 1051</span>            --<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>;</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span>            <span class="comment">// Return the old last pointer from the freelist</span></div>
<div class="line"><span class="lineno"> 1054</span>            <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a> = <a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>];</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span><span class="preprocessor">#           ifdef G3D_DEBUG</span></div>
<div class="line"><span class="lineno"> 1057</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 1058</span>                    assert(<a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a> - 1] != <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>); </div>
<div class="line"><span class="lineno"> 1059</span>                     <span class="comment">//   &quot;System::malloc heap corruption detected: &quot;</span></div>
<div class="line"><span class="lineno"> 1060</span>                     <span class="comment">//   &quot;the last two pointers on the freelist are identical (during tinyMalloc).&quot;);</span></div>
<div class="line"><span class="lineno"> 1061</span>                }</div>
<div class="line"><span class="lineno"> 1062</span><span class="preprocessor">#           endif</span></div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>            <span class="comment">// NULL out the entry to help detect corruption</span></div>
<div class="line"><span class="lineno"> 1065</span>            <a class="code hl_variable" href="classG3D_1_1BufferPool.html#afd173590815a149d38617043ac7ef36d">tinyPool</a>[<a class="code hl_variable" href="classG3D_1_1BufferPool.html#a42ef6e5ce32c2937dbc63867c257f351">tinyPoolSize</a>] = NULL;</div>
<div class="line"><span class="lineno"> 1066</span>        }</div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="fmt_2include_2fmt_2format_8h.html#adb6e274f8eb0b74b2865215e1b49c535">ptr</a>;</div>
<div class="line"><span class="lineno"> 1069</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_aa9ee76bae578f498a4f575624a313bee_cgraph.svg" width="300" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_aa9ee76bae578f498a4f575624a313bee_icgraph.svg" width="438" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4a335e0bc88d38b9dcaca718fd1447f6" name="a4a335e0bc88d38b9dcaca718fd1447f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a335e0bc88d38b9dcaca718fd1447f6">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void G3D::BufferPool::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01035">1035</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1035</span>                  {</div>
<div class="line"><span class="lineno"> 1036</span>        <a class="code hl_variable" href="classG3D_1_1BufferPool.html#a7ce128971566ce3bfc185c20e8adc312">m_lock</a>.<a class="code hl_function" href="classG3D_1_1Spinlock.html#a3b7b48691fbf7ea8618d1bf4a17468a8">unlock</a>();</div>
<div class="line"><span class="lineno"> 1037</span>    }</div>
<div class="ttc" id="aclassG3D_1_1Spinlock_html_a3b7b48691fbf7ea8618d1bf4a17468a8"><div class="ttname"><a href="classG3D_1_1Spinlock.html#a3b7b48691fbf7ea8618d1bf4a17468a8">G3D::Spinlock::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition</b> <a href="GMutex_8h_source.html#l00065">GMutex.h:65</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4a335e0bc88d38b9dcaca718fd1447f6_cgraph.svg" width="650" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classG3D_1_1BufferPool_a4a335e0bc88d38b9dcaca718fd1447f6_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac046209fa410e9e447d36444ca07db79" name="ac046209fa410e9e447d36444ca07db79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac046209fa410e9e447d36444ca07db79">&#9670;&#160;</a></span>bytesAllocated</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile size_t G3D::BufferPool::bytesAllocated</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Amount of memory currently allocated (according to the application). This does not count the memory still remaining in the buffer pool, but does count extra memory required for rounding off to the size of a buffer. Primarily useful for detecting leaks. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01152">1152</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a7ce128971566ce3bfc185c20e8adc312" name="a7ce128971566ce3bfc185c20e8adc312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce128971566ce3bfc185c20e8adc312">&#9670;&#160;</a></span>m_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1Spinlock.html">Spinlock</a> G3D::BufferPool::m_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01029">1029</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a88a1ece3af70eed61552533ca8a64b6e" name="a88a1ece3af70eed61552533ca8a64b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88a1ece3af70eed61552533ca8a64b6e">&#9670;&#160;</a></span>mallocsFromMedPool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::mallocsFromMedPool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01144">1144</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a13b3cb9118b402a8715f82f1bfa49d2e" name="a13b3cb9118b402a8715f82f1bfa49d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b3cb9118b402a8715f82f1bfa49d2e">&#9670;&#160;</a></span>mallocsFromSmallPool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::mallocsFromSmallPool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01143">1143</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a3a6760afc97311c48b2e9a258f197981" name="a3a6760afc97311c48b2e9a258f197981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a6760afc97311c48b2e9a258f197981">&#9670;&#160;</a></span>mallocsFromTinyPool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::mallocsFromTinyPool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01142">1142</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a73db98d9f9fbba696e550d6cc3e58094" name="a73db98d9f9fbba696e550d6cc3e58094"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73db98d9f9fbba696e550d6cc3e58094">&#9670;&#160;</a></span>medPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> G3D::BufferPool::medPool[<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174ad1675fa70ff833b78a987ac5593ae71c">maxMedBuffers</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01016">1016</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="af195680c9c3b45a44f0230ab423e076c" name="af195680c9c3b45a44f0230ab423e076c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af195680c9c3b45a44f0230ab423e076c">&#9670;&#160;</a></span>medPoolSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::medPoolSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01017">1017</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a418998c669ca071ecaf8ace2caa23acc" name="a418998c669ca071ecaf8ace2caa23acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418998c669ca071ecaf8ace2caa23acc">&#9670;&#160;</a></span>smallPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classG3D_1_1BufferPool_1_1MemBlock.html">MemBlock</a> G3D::BufferPool::smallPool[<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174abe9f7ae6d398f8493a9700acb1612af9">maxSmallBuffers</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01013">1013</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a19c24c9ce440cce19a83a738f5fdd98d" name="a19c24c9ce440cce19a83a738f5fdd98d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19c24c9ce440cce19a83a738f5fdd98d">&#9670;&#160;</a></span>smallPoolSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::smallPoolSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01014">1014</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a4ec38ea52cf6d4ced646d72f516ccbe4" name="a4ec38ea52cf6d4ced646d72f516ccbe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec38ea52cf6d4ced646d72f516ccbe4">&#9670;&#160;</a></span>tinyHeap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* G3D::BufferPool::tinyHeap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classG3D_1_1Pointer.html">Pointer</a> to the data in the tiny pool </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01027">1027</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="afd173590815a149d38617043ac7ef36d" name="afd173590815a149d38617043ac7ef36d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd173590815a149d38617043ac7ef36d">&#9670;&#160;</a></span>tinyPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* G3D::BufferPool::tinyPool[<a class="el" href="classG3D_1_1BufferPool.html#a8ed4601b02312f6b97e82bcb28087174a6bf3015cb9c7cf7d672da8718bb9574e">maxTinyBuffers</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The tiny pool is a single block of storage into which all tiny objects are allocated. This provides better locality for small objects and avoids the search time, since all tiny blocks are exactly the same size. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01023">1023</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a42ef6e5ce32c2937dbc63867c257f351" name="a42ef6e5ce32c2937dbc63867c257f351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42ef6e5ce32c2937dbc63867c257f351">&#9670;&#160;</a></span>tinyPoolSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::tinyPoolSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01024">1024</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<a id="a986af21e14409457cdc854ec2f316d5a" name="a986af21e14409457cdc854ec2f316d5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a986af21e14409457cdc854ec2f316d5a">&#9670;&#160;</a></span>totalMallocs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int G3D::BufferPool::totalMallocs</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Count of memory allocations that have occurred. </p>

<p class="definition">Definition at line <a class="el" href="dep_2g3dlite_2System_8cpp_source.html#l01141">1141</a> of file <a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>AscEmu/dep/g3dlite/<a class="el" href="dep_2g3dlite_2System_8cpp_source.html">System.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceG3D.html">G3D</a></li><li class="navelem"><a class="el" href="classG3D_1_1BufferPool.html">BufferPool</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
